#include <stdio.h>
#include <stdlib.h>

int main(){
//Declarando as variaveis
int lin1,col1,lin2,col2;
int linres,colres,i,j,k, flag=0;
int A[lin1][col1];
int B[lin2][col2];
int C[linres][colres];
char op;

//Solicitando as dimensoes ao usuario
    printf("\nQuantidade de linhas da matriz A: ");
    scanf("%d", &lin1);
    printf("\nQuantidade de colunas da matriz A: ");
    scanf("%d", &col1);
    printf("\nQuantidade de linhas da matriz B: \n");
    scanf("%d", &lin2);
    printf("\nQuantidade de colunas da matriz B: \n");
    scanf("%d", &col2);

//Verificando se nao ha extravagancia
    if ((((lin1>100) || (col1>100)) || ((lin2>100) || (col2>100))) || (((lin1<1) || (col1<1)) || ((lin2<1) || (col2<1)))){
        printf("A dimensao nao e valida! \n");
        return 0;
    }
    else{

//Pedindo a matriz A
        for(i=0;i<lin1;i++){
            for(j=0;j<col1;j++){
                printf("Elemento [%d][%d] da Matriz A: ", i+1,j+1);
                scanf("%d", &A[i][j]);
            }
        }
//Pedindo a matriz B
        for(i=0;i<lin2;i++){
            for(j=0;j<col2;j++){
                printf("Elemento [%d][%d] da Matriz B: ", i+1,j+1);
                scanf("%d", &B[i][j]);
            }
        }

//Mostrando o cardapio
        printf("********Operacao Permitidas******** \n");
        printf("+ Soma \n");
        printf("- Subtracao \n");
        printf("* Multiplicacao \n");
        printf("*********************************** \n");
        printf("Digite a operacao desejada: ");
        scanf(" %c", &op);

//Operando conforme requerido
        switch (op){

//Multiplicacao
            case '*':
                if (col1==lin2){
                    linres=lin1;
                    colres=col2;
                    for (i=0;i<linres;i++){
                        for (j=0;j<colres;j++){
                            C[i][j]=0;
                            for (k=0;k<col1;k++){
                                C[i][j]=C[i][j] + A[i][k] * B[k][j];
                            }
                        }

                    }
                }
                else{
                    printf("Nao eh possivel multiplicar! As matrizes nao tem dimensoes compativeis! \n");
                    flag=1;
                    break;
                }
                break;

//Soma
            case '+':
                if ((col1==col2) && (lin1==lin2)){
                    linres=lin1;
                    colres=col1;
                    for (i=0;i<linres;i++){
                        for (j=0;j<colres;j++){
                            C[i][j]=A[i][j]+B[i][j];
                        }
                    }
                }
                else{
                    printf("Nao eh possivel fazer a soma! As matrizes nao tem dimensoes iguais! \n");
                    flag=1;
                    break;
                }
                break;

//Subtracao
            case '-':
                if ((col1==col2) && (lin1==lin2)){
                    linres=lin1;
                    colres=col1;
                    for (i=0;i<linres;i++){
                        for (j=0;j<colres;j++){
                            C[i][j]=A[i][j]-B[i][j];
                        }
                    }
                }
                else{
                    printf("Nao eh possivel fazer a subtracao! As matrizes nao tem dimensoes iguais! \n");
                    flag=1;
                    break;
                }
                break;
        }

//Imprimindo o resultado
        if (flag==0){
            if (op=='*'){
                printf("Resultado da Multiplicacao A*B: \n");
            }
            else if (op=='+'){
                printf("Resultado da Soma A+B: \n");
            }
            else if (op=='-'){
                printf("Resultado da Subtracao A-B: \n");
            }
                for(i=0;i<linres;i++){
                    for(j=0; j<colres;j++){
                        printf("%d  ", C[i][j]);
                    }
                    printf("\n");
                }
        }
    }

return 0;
}